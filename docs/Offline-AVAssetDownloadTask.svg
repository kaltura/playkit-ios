<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="226px" preserveAspectRatio="none" style="width:970px;height:226px;" version="1.1" viewBox="0 0 970 226" width="970px" zoomAndPan="magnify"><defs><filter height="300%" id="f10re2a6qpprgp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="200" x2="200" y1="38.4883" y2="185.7305"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="631.5" x2="631.5" y1="38.4883" y2="185.7305"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="786.5" x2="786.5" y1="38.4883" y2="185.7305"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="913.5" x2="913.5" y1="38.4883" y2="185.7305"/><rect fill="#FEFECE" filter="url(#f10re2a6qpprgp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="177" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="184" y="23.5352">App</text><rect fill="#FEFECE" filter="url(#f10re2a6qpprgp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="42" x="177" y="184.7305"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="184" y="205.2656">App</text><rect fill="#FEFECE" filter="url(#f10re2a6qpprgp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="553.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="560.5" y="23.5352">LocalAssetsManager</text><rect fill="#FEFECE" filter="url(#f10re2a6qpprgp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="553.5" y="184.7305"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="560.5" y="205.2656">LocalAssetsManager</text><rect fill="#FEFECE" filter="url(#f10re2a6qpprgp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="720.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="727.5" y="23.5352">ContentManager</text><rect fill="#FEFECE" filter="url(#f10re2a6qpprgp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="720.5" y="184.7305"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="727.5" y="205.2656">ContentManager</text><rect fill="#FEFECE" filter="url(#f10re2a6qpprgp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="863.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="870.5" y="23.5352">AVURLAsset</text><rect fill="#FEFECE" filter="url(#f10re2a6qpprgp)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="863.5" y="184.7305"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="870.5" y="205.2656">AVURLAsset</text><polygon fill="#A80036" points="620,65.4883,630,69.4883,620,73.4883,624,69.4883" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="200" x2="626" y1="69.4883" y2="69.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="408" x="207" y="65.0566">mediaSource = getPreferredDownloadableMediaSource(for: entry)</text><polygon fill="#A80036" points="901.5,94.7988,911.5,98.7988,901.5,102.7988,905.5,98.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="200" x2="907.5" y1="98.7988" y2="98.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="207" y="94.3672">avAsset = init(mediaSource.contentUrl)</text><polygon fill="#A80036" points="620,124.1094,630,128.1094,620,132.1094,624,128.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="200" x2="626" y1="128.1094" y2="128.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="404" x="207" y="123.6777">prepareForDownload(asset: avAsset, mediaSource: mediaSource)</text><path d="M8,141.4199 L8,166.4199 L388,166.4199 L388,151.4199 L378,141.4199 L8,141.4199 " fill="#FBFB77" filter="url(#f10re2a6qpprgp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M378,141.4199 L378,151.4199 L388,151.4199 L378,141.4199 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="359" x="14" y="158.9883">Create and start an AVAssetDownloadTask (out of scope)</text><!--
@startuml Offline-AVAssetDownloadTask

participant App
participant LocalAssetsManager as LAM
participant ContentManager as CM

App->LAM: mediaSource = getPreferredDownloadableMediaSource(for: entry)
App->AVURLAsset: avAsset = init(mediaSource.contentUrl)
App->LAM: prepareForDownload(asset: avAsset, mediaSource: mediaSource)
note over App: Create and start an AVAssetDownloadTask (out of scope)


@enduml

PlantUML version 1.2018.02beta8(Unknown compile time)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-915-b08
Operating System: Mac OS X
OS Version: 10.13.3
Default Encoding: UTF-8
Language: en
Country: IL
--></g></svg>